<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<!--
  	作者：185601452@qq.com
  	时间：2016-03-11
  	描述：名家
  -->

	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
		<title></title>
		<link href="css/style.css" rel="stylesheet" type="text/css" />
		<link href="css/tuch.css" rel="stylesheet" type="text/css" />
		<link href="css/mingjia.css" rel="stylesheet" type="text/css" />
		<script type="text/javascript" src="js/style.js"></script>
		<!--标准mui.css-->
		<link rel="stylesheet" href="css/mui.min.css">
		<link rel="stylesheet" href="css/loadAnim1.css" />
		<script type="text/javascript" src="js/stringUtil.js" ></script>
		<script src="js/mui.min.js"></script>
		<style type="text/css">
			.mj_menu {
				width: 100%;
				float: left;
			}
			.mj_menu a p {
				display: block;
				float: left;
				width: 32%;
				padding-left: 3%;
			}
			
			.mj_menu a p img {
				width: 100%;
			}
			
			.mj_menu a h3 {
				width: 65%;
				float: left;
				font-size: 1.1rem;
				font-weight: normal;
				display: block;
				line-height: 1.5rem;
				margin-top: 0.6rem;
				text-indent: 0.2rem;
				color: #333;
			}
			
			.mj_menu a span {
				display: block;
				float: left;
				width: 65%;
				font-size: 0.8rem;
				color: #999;
				text-indent: 0.3rem;
			}
			
			.mj_menu a {
				width: 50%;
				float: left;
				border-bottom: 1px solid #EBEBEB;
				padding-top: 0.5rem;
				display: block;
				background: #FFF none repeat scroll 0% 0%;
			}
			
			.remengd {
				padding: 10px;
			}
			
			.mingshi {
				padding: 10px;
			}
			
			.mingjiaask {
				padding: 10px 10px 0 10px;
			}
			
			.mui-slider {
				margin-top: 40px;
			}
			
			#native {
				display: none;
			}
			
			#remen_banner {
				display: none;
			}
			
			#mingshi_banner {
				display: none;
			}
			
			#wenda_banner {
				display: none;
			}
		</style>

	</head>

	<body>

		<div class="wrapper">
			<!------------头部--------------->

			<header class="header">
				<div class="head">
					<div id="pageTop1_show_login_link" class="denglu"> <a><i><img src="image/unlogin.png" /></i><em></em></a></div>
					<div class="logo">
						<a><img src="image/jucai.png" /></a>
					</div>
				</div>
			</header>
			<!------------首页轮播图---------->
			<!-- 轮播图 -->
			<div class="mui-slider">
				<div class="mui-slider-group mui-slider-loop" id="pager">
					<!--广告-->
				</div>

			</div>
			<!------------导航---------->

			<div class="mj_menu" id="native">
				<a class="left_border" id="dish" style="border-right: 2px solid #efeff4;">
					<p>
						<img src="image/lookimage.png" /></p>
					<h3>名师看盘</h3>
					<span id="renqi"></span>
				</a>
				<a id="intoAsk">
					<p>
						<img src="image/answerimage.png" /></p>
					<h3>名家问答</h3>
					<span id="answerCount"></span>
				</a>
				<a class="left_border" id="intrialIdea" style="border-right: 2px solid #efeff4;">
					<p>
						<img src="image/seeimage.png" /></p>
					<h3>投资观点</h3>
					<span id="ideaCount"></span>
				</a>
				<a id="findTeacher">
					<p>
						<img src="image/findimage.png" /></p>
					<h3>找名家</h3>
					<span id="fans"></span>
				</a>
			</div>
			<!------------居中部分---------->
			<!------------热门观点开始---------->
			<div class="remengd" id="remen_banner">
				<div class="licai_top">
					<h3>热门观点</h3>
					<a href="intrvlIdea.html">更多</a>
				</div>
				<div class="yaowen_b">
					<ul id="data-hotIdeas">
					</ul>
				</div>
			</div>

		</div>
		<!--------热门观点结束---------->
		<!------------推荐名师开始---------->
		<div class="mingshi" id="mingshi_banner">
			<div class="licai_top">
				<h3>推荐名师</h3>
				<span><a href="teacherList.html">更多></a></span></div>
			<div id="famousList">

			</div>

		</div>
		<!--------推荐名师结束---------->
		<!--------名家问答开始---------->
		<div class="mingjiaask" id="wenda_banner">
			<div class="licai_top">
				<h3>名家问答</h3>
				<span><a href="answerList.html">更多></a></span></div>
			<!-------------->
			<div id="data-question">

			</div>

		</div>
		<!--------名家问答结束---------->

		<!------------底部定位层---------->

		<div style="text-align: center;margin-top: 60%;display: none;" id="fad_load">
			<div class="spinner">
				<div class="spinner-container container1">
					<div class="circle1"></div>
					<div class="circle2"></div>
					<div class="circle3"></div>
					<div class="circle4"></div>
				</div>
				<div class="spinner-container container2">
					<div class="circle1"></div>
					<div class="circle2"></div>
					<div class="circle3"></div>
					<div class="circle4"></div>
				</div>
				<div class="spinner-container container3">
					<div class="circle1"></div>
					<div class="circle2"></div>
					<div class="circle3"></div>
					<div class="circle4"></div>
				</div>
			</div>
		</div>

		<footer class="footer">
			<div class="foot">
				<div class="footcenter">
					<ul style="height: 60px;">
						<li><a id="indexs"><span><img src="image/indexnormal.png" style="width: 50px;height: 50px;"/></span></a></li>
						<li><a id="trhreeBoard"><span><img src="image/licainorma.png" style="width: 50px;height: 50px;"/></span></a></li>
						<li><a id="liveList"><span><img src="image/livenormal.png"style="width: 50px;height: 50px;" /></span></a></li>
						<li><a id="attentions"><span><img src="image/fincenormal.png" style="width: 50px;height: 50px;"/></span></a></li>
						<li><a><span><img src="image/classpress.png" style="width: 50px;height: 50px;"/></span></a></li>
					</ul>
				</div>
			</div>
		</footer>

		<script type="text/javascript" charset="UTF-8">
			mui.init({
				swipeBack: true, //启用右滑关闭功能
				preloadPages:[
				{
					url:"dishList.html",
					id:"dishList"
				},{
					url:'teacherList.html',
					id:"teacherList"
				}
				]
			});
			mui.plusReady(function() {
				//预加载名师看盘信息
				var dishPage = mui.preload({
						url: "dishList.html",
						id: "dishList",
						extras:{
							querryType:1
						}
					})
					//与加载找名家
				var teacherListPage = mui.preload({
					url: "teacherList.html",
					id: "teacherList"
				})
				var page = document.getElementById('pager');
				var queryAdice = "http://"+portStr()+"/AccumulateWealth/jucaipen/adverQuerry";
				var teacherList = "http://"+portStr()+"/AccumulateWealth/jucaipen/famousTeacherList";
				var teacherQuestion = "http://"+portStr()+"/AccumulateWealth/jucaipen/teacherQuestion";
				var sumData = "http://"+portStr()+"/AccumulateWealth/jucaipen/indexStatisticsData";
				var ideaPath="http://"+portStr()+"/AccumulateWealth/jucaipen/hotIdeaList";
				var hotIdeas = document.getElementById("data-hotIdeas");
				var intoLogin = document.getElementById("pageTop1_show_login_link");
				var famousList = document.getElementById("famousList");
				var index = document.getElementById("indexs");
				var trhreeBoard = document.getElementById("trhreeBoard");
				var question = document.getElementById("data-question");
				var renqi = document.getElementById("renqi");
				var answerCount = document.getElementById("answerCount");
				var ideaCount = document.getElementById("ideaCount");
				var fans = document.getElementById("fans");
				var dish = document.getElementById("dish");
				var attentions = document.getElementById("attentions");
				var intoAsk = document.getElementById("intoAsk");
				var intrial = document.getElementById("intrialIdea");
				var findTeacher = document.getElementById("findTeacher");
				var liveList = document.getElementById("liveList");
				var natives = document.getElementById("native");
				var remen_banner = document.getElementById("remen_banner");
				var mingshi_banner = document.getElementById("mingshi_banner");
				var wenda_banner = document.getElementById("wenda_banner");
				var fad_load = document.getElementById("fad_load");
				var styles = {};
				styles.scrollIndicator = 'none';
				controlScrollBar(plus.webview.currentWebview(), styles);
				fad_load.style.display = 'block';
				//获取广告
				var url = "";
				mui.ajax(queryAdice, {
					data: {
						type: 1
					},
					dataType: 'json',
					type: "get",
					timeout: 10000,
					success: function(data) {
						natives.style.display = 'block';
						fad_load.style.display = 'none';
						url += "<div class='mui-slider-item mui-slider-item-duplicate'><a href='#'><img src=" + data[data.length - 1].imageUrl + " id=" + data[data.length - 1].id + " /></a></div>";
						for (var i = 0; i < data.length; i++) {
							var imageUrl = data[i].imageUrl;
							url += "<div class='mui-slider-item'><a href='#'><img src=" + imageUrl + " id=" + data[i].id + " /></a></div>";
						}
						url += "<div class='mui-slider-item mui-slider-item-duplicate'><a href='#'><img src=" + data[0].imageUrl + " id=" + data[0].id + " /></a></div>";
						page.innerHTML = url;
						mui("#pager").on("tap", "img", function() {
								var id = this.getAttribute("id");
								if (id == 1) {
									//股权投资
								} else if (id == 2) {
									//证券教学
									mui.openWindow({
										url: "liveRoom.html",
										id: "liveRoom",
										extras: {
											liveId: 1
										},
										waiting: {
											autoShow: false
										}
									})
								} else if (id == 3) {
									//新三板
									mui.openWindow({
										url: "trhreeBoard.html",
										id: "trhreeBoard",
										waiting: {
											autoShow: false
										}
									})
								}
							}, false)
							//获得slider插件对象
						var gallery = mui('.mui-slider');
						gallery.slider({
							interval: 2000 //自动轮播周期，若为0则不自动播放，默认为0；
						});
					},
					error: function(xhr,type,e) {
						//mui.toast('获取数据失败，请稍后重试:'+type);
					}
				});
				//热门观点
				var hotUrl = '';
				mui.ajax(ideaPath, {
						data: {
							whichPage: 0,
						},
						dataType: 'json',
						type: 'post',
						timeout: 10000,
						success: function(data) {
							fad_load.style.display = 'none';
							if (data.length > 0) {
								remen_banner.style.display = 'block';
							}
							for (var i = 0; i < data.length; i++) {
								var body = data[i].bodys.replace(/<[^>]+>/g, "");
								hotUrl += "<li id=" + data[i].id + "><span><a><img src=" + data[i].logImage + "  /></a></span> " + " <div><h3><a style='margin-left:20px'>" + data[i].title + "</a></h3><lable style='height: 40px;overflow: hidden;float:right;margin-left:20px;font-size: 0.8rem;color: #666;line-height:1.2rem;'>" + body + "</lable></div> </li>";
							}
							hotIdeas.innerHTML = hotUrl;
							mui("#data-hotIdeas").on("tap", "li", function() {
								var iId = this.getAttribute("id");
								mui.openWindow({
									url: "ideaDetail.html",
									id: "ideaDetail",
									extras: {
										ideaId: iId
									},
									waiting: {
										autoShow: false
									}
								})
							}, false)
						},
						error: function(xhr,type,e) {
							//mui.toast('获取数据失败，请稍后重试:'+type);
						}
					})
					//推荐名师
				var teacherStr = "";
				mui.ajax(teacherList, {
						data: {
							whichPage: 0
						},
						type: "get",
						dataType: "json",
						timeout: 10000,
						success: function(data) {
							fad_load.style.display = 'none';
							if (data.length > 0) {
								mingshi_banner.style.display = 'block';
							}
							for (var i = 0; i < data.length; i++) {
								var intro = data[i].introduce.replace(/<[^>]+>/g, "");
								teacherStr += "  <div id=" + data[i].id + " class='item'><a><span><img src=" + data[i].headFace + "></span></a><a><h4>"
								+ data[i].nickName + "&nbsp;<i><img src='image/v1.png'></i></h4>" + "</a><em>" + data[i].level 
								+ "</em><a> <p id='introduce' style='height: 40px;overflow: hidden;width:100%;'>" + intro + "</p>" + "</a> </div>";
							}
							famousList.innerHTML = teacherStr;
							mui("#famousList").on("tap", ".item", function() {
								var tId = this.getAttribute("id");
								mui.openWindow({
									url: "teacherDetail.html",
									id: "teacherDetail",
									extras: {
										teacherId: tId
									},
									waiting: {
										autoShow: false
									}
								})
							}, false)
						},
						error: function(xhr,type,e) {
							//mui.toast('获取数据失败，请稍后重试:'+type);
						}
					})
					//名师问答
				var questionStr = "";
				mui.ajax(teacherQuestion, {
						data: {
							whichPage: 0
						},
						type: "get",
						dataType: "json",
						timeout: 10000,
						success: function(data) {
							fad_load.style.display = 'none';
							if (data.length > 0) {
								wenda_banner.style.display = 'block';
							}
							for (var i = 0; i < data.length; i++) {
								questionStr += "<div id=" + data[i].teacherId + " class='item'><div class='huida'><a><span><img src=" + data[i].headFace + "></span></a><div class='name'><a><h4>" + data[i].nickName + "&nbsp;<i><img src='image/v1.png'></i></h4>" 
								+ "</a><em>" + data[i].level + "</em></div><a class='ask' t=" + data[i].teacherId + ">咨询</a></div><div class='wen'>" 
								+ "<span> <img src='image/askinfo.png'></span><p><a>" + data[i].askName + ":</a>" + "<a style='color: #666'>" 
								+ data[i].askBody + "</a></p><em style='font-size:12px'>已回答</em></div>" + "<div class='huida_body'>" + data[i].answerBody + "</div></div>";
							}
							question.innerHTML = questionStr;
							mui("#data-question").on("tap", ".ask", function() {
								var tId = this.getAttribute("t");
								var uId = localStorage.getItem('userId');
								if (uId <= 0) {
									mui.openWindow({
										url: "login.html",
										id: "login",
										waiting: {
											autoShow: false
										}
									})
									return false;
								}
								mui.openWindow({
									url: "askQuestion.html",
									id: "askQuestion",
									extras: {
										teacherId: tId
									},
									waiting: {
										autoShow: false
									}
								})
								return false;
							}, false)
							mui("#data-question").on("tap", ".item", function() {
								var tId = this.getAttribute("id");
								mui.openWindow({
									url: "teacherDetail.html",
									id: "teacherDetail",
									extras: {
										teacherId: tId
									},
									waiting: {
										autoShow: false
									}
								})
								return false;
							}, false)
						},
						error: function(xhr,type,e) {
							//mui.toast('获取数据失败，请稍后重试:'+type);
						}
					})
					//获取首页统计数据
				mui.ajax(sumData, {
					type: "get",
					dataType: "json",
					timeout: 10000,
					success: function(data) {
						renqi.innerText = "人气：" + (data.renQi / 10000).toFixed(1) + "万人";
						answerCount.innerText = "回答:" + data.answerCount + "个";
						ideaCount.innerText = "观点：" + data.ideas + "篇";
						fans.innerText = "粉丝：" + data.fans + "人";
					},
					error: function(xhr,type,e) {
						//mui.toast('获取数据失败，请稍后重试:'+type);
					}
				})
				dish.addEventListener("tap", function() {
						mui.openWindow({
							url: "dishList.html",
							id: "dishList",
							waiting: {
								autoShow: false
							}
						})
					}, false)
					//名师问答
				intoAsk.addEventListener("tap", function() {
						mui.openWindow({
							url: "answerList.html",
							id: "answerList",
							waiting: {
								autoShow: false
							}
						})
					}, false)
					//投资观点
				intrial.addEventListener("tap", function() {
						mui.openWindow({
							url: "intrvlIdea.html",
							id: "intrvlIdea",
							waiting: {
								autoShow: false
							}
						})
					}, false)
					//推荐名师
				findTeacher.addEventListener("tap", function() {
						mui.openWindow({
							url: "teacherList.html",
							id: "teacherList",
							waiting: {
								autoShow: false
							}
						})
					}, false)
					//进入登录
				intoLogin.addEventListener("tap", function() {
						var uId = localStorage.getItem("userId");
						if (uId <= 0) {
							mui.openWindow({
								url: "login.html",
								id: "login",
								waiting: {
									autoShow: false
								}
							})
						} else {
							mui.openWindow({
								url: "vipcenter.html",
								id: "vipcenter",
								waiting: {
									autoShow: false
								}
							})
						}
					}, false)
					//跳转到首页
				index.addEventListener('tap', function() {
						mui.openWindow({
							url: "index.html",
							id: "index",
							waiting: {
								autoShow: false
							},
							createNew:true,
							show: {
								aniShow: 'none' //页面显示动画，默认为”slide-in-right“；
							}
						})
					}, false)
					//跳转到热门
				trhreeBoard.addEventListener('tap', function() {
						mui.openWindow({
							url: "trhreeBoard.html",
							id: "trhreeBoard",
							waiting: {
								autoShow: false
							},
							show: {
								aniShow: 'none' //页面显示动画，默认为”slide-in-right“；
							}
						})
					}, false)
					//跳转到直播
				liveList.addEventListener('tap', function() {
						mui.openWindow({
							url: "liveList.html",
							id: "liveList",
							waiting: {
								autoShow: false
							},
							show: {
								aniShow: 'none' //页面显示动画，默认为”slide-in-right“；
							}
						})
					}, false)
					//跳转到名家
				attentions.addEventListener('tap', function() {
					mui.openWindow({
						url: "attention.html",
						id: "attention",
						waiting: {
							autoShow: false
						},
						show: {
							aniShow: 'none' //页面显示动画，默认为”slide-in-right“；
						}
					})
				}, false)
			})
		</script>
	</body>

</html>